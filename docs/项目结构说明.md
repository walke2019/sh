# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ å®Œæ•´ç›®å½•ç»“æ„

```
f:\é¡¹ç›®\sh\
â”‚
â”œâ”€â”€ kejilion.sh                      # ä¸Šæ¸¸ä¸»è„šæœ¬ï¼ˆä¸ä¿®æ”¹ï¼‰
â”œâ”€â”€ kejilion_sh_log.txt              # ä¸Šæ¸¸æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ LICENSE                          # è®¸å¯è¯æ–‡ä»¶
â”œâ”€â”€ README.md                        # ä¸Šæ¸¸é¡¹ç›®è¯´æ˜
â”‚
â”œâ”€â”€ custom/                          # ğŸ¯ è‡ªå®šä¹‰å·¥å…·ç®±ç›®å½•ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ custom_main.sh               # è‡ªå®šä¹‰å·¥å…·ç®±ä¸»å…¥å£
â”‚   â”œâ”€â”€ integrate.sh                 # é›†æˆå‘å¯¼è„šæœ¬
â”‚   â”œâ”€â”€ README.md                    # è‡ªå®šä¹‰å·¥å…·ç®±è¯´æ˜
â”‚   â”œâ”€â”€ å¿«é€Ÿå¼€å§‹.md                  # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”‚   â”‚
â”‚   â”œâ”€â”€ tools/                       # è‡ªå®šä¹‰å·¥å…·è„šæœ¬ç›®å½•
â”‚   â”‚   â”œâ”€â”€ tool1.sh                 # ç¤ºä¾‹å·¥å…· 1
â”‚   â”‚   â”œâ”€â”€ tool2.sh                 # ç¤ºä¾‹å·¥å…· 2
â”‚   â”‚   â””â”€â”€ tool3.sh                 # ç¤ºä¾‹å·¥å…· 3
â”‚   â”‚
â”‚   â””â”€â”€ config/                      # é…ç½®æ–‡ä»¶ç›®å½•
â”‚       â””â”€â”€ settings.conf            # ä¸»é…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ docs/                            # ğŸ“š é¡¹ç›®æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ è‡ªå®šä¹‰å·¥å…·ç®±åˆ›å»ºæŒ‡å—.md      # è¯¦ç»†åˆ›å»ºæŒ‡å—
â”‚   â””â”€â”€ é¡¹ç›®ç»“æ„è¯´æ˜.md              # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ .gitignore                       # Git å¿½ç•¥é…ç½®
â”‚
â””â”€â”€ [å…¶ä»–ä¸Šæ¸¸æ–‡ä»¶]                   # ä¸Šæ¸¸é¡¹ç›®çš„å…¶ä»–æ–‡ä»¶
    â”œâ”€â”€ cn/                          # ä¸­æ–‡ç‰ˆæœ¬
    â”œâ”€â”€ en/                          # è‹±æ–‡ç‰ˆæœ¬
    â”œâ”€â”€ ir/                          # æ³¢æ–¯è¯­ç‰ˆæœ¬
    â”œâ”€â”€ jp/                          # æ—¥è¯­ç‰ˆæœ¬
    â”œâ”€â”€ kr/                          # éŸ©è¯­ç‰ˆæœ¬
    â”œâ”€â”€ ru/                          # ä¿„è¯­ç‰ˆæœ¬
    â”œâ”€â”€ tw/                          # ç¹ä½“ä¸­æ–‡ç‰ˆæœ¬
    â””â”€â”€ ...                          # å…¶ä»–é…ç½®å’Œè„šæœ¬æ–‡ä»¶
```

---

## ğŸ¯ æ ¸å¿ƒç›®å½•è¯´æ˜

### 1. custom/ - è‡ªå®šä¹‰å·¥å…·ç®±ç›®å½•

è¿™æ˜¯ä½ çš„**æ ¸å¿ƒå·¥ä½œç›®å½•**ï¼Œæ‰€æœ‰è‡ªå®šä¹‰åŠŸèƒ½éƒ½åº”è¯¥æ”¾åœ¨è¿™é‡Œã€‚

#### ä¸»è¦æ–‡ä»¶ï¼š

- **custom_main.sh**ï¼šè‡ªå®šä¹‰å·¥å…·ç®±çš„ä¸»å…¥å£è„šæœ¬ï¼ŒåŒ…å«èœå•ç³»ç»Ÿ
- **integrate.sh**ï¼šé›†æˆå‘å¯¼ï¼Œå¸®åŠ©å°†è‡ªå®šä¹‰å·¥å…·ç®±é›†æˆåˆ°ä¸»è„šæœ¬
- **README.md**ï¼šè‡ªå®šä¹‰å·¥å…·ç®±çš„ä½¿ç”¨è¯´æ˜
- **å¿«é€Ÿå¼€å§‹.md**ï¼šå¿«é€Ÿä¸Šæ‰‹æŒ‡å—

#### å­ç›®å½•ï¼š

- **tools/**ï¼šå­˜æ”¾æ‰€æœ‰è‡ªå®šä¹‰å·¥å…·è„šæœ¬
  - æ¯ä¸ªå·¥å…·ä¸€ä¸ªç‹¬ç«‹çš„ `.sh` æ–‡ä»¶
  - å»ºè®®æŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡
  
- **config/**ï¼šå­˜æ”¾é…ç½®æ–‡ä»¶
  - `settings.conf`ï¼šä¸»é…ç½®æ–‡ä»¶
  - å¯ä»¥æ·»åŠ æ›´å¤šç¯å¢ƒç›¸å…³çš„é…ç½®æ–‡ä»¶

### 2. docs/ - æ–‡æ¡£ç›®å½•

å­˜æ”¾é¡¹ç›®ç›¸å…³çš„ä¸­æ–‡æ–‡æ¡£ï¼š

- **è‡ªå®šä¹‰å·¥å…·ç®±åˆ›å»ºæŒ‡å—.md**ï¼šè¯¦ç»†çš„åˆ›å»ºå’Œä½¿ç”¨æŒ‡å—
- **é¡¹ç›®ç»“æ„è¯´æ˜.md**ï¼šæœ¬æ–‡æ¡£ï¼Œè¯´æ˜é¡¹ç›®ç»“æ„

### 3. ä¸Šæ¸¸æ–‡ä»¶

è¿™äº›æ˜¯ä» kejilion/sh é¡¹ç›®ç»§æ‰¿çš„æ–‡ä»¶ï¼Œ**ä¸åº”è¯¥ç›´æ¥ä¿®æ”¹**ï¼š

- `kejilion.sh`ï¼šä¸Šæ¸¸ä¸»è„šæœ¬
- å¤šè¯­è¨€ç›®å½•ï¼ˆcn/, en/, ir/, jp/, kr/, ru/, tw/ï¼‰
- å…¶ä»–é…ç½®æ–‡ä»¶å’Œå·¥å…·è„šæœ¬

---

## ğŸ”„ å·¥ä½œæµç¨‹

### å¼€å‘æµç¨‹

```
1. åœ¨ custom/tools/ åˆ›å»ºæ–°å·¥å…·è„šæœ¬
   â†“
2. åœ¨ custom_main.sh æ·»åŠ èœå•é¡¹
   â†“
3. æµ‹è¯•å·¥å…·åŠŸèƒ½
   â†“
4. æ›´æ–°æ–‡æ¡£
   â†“
5. æäº¤åˆ° Git
```

### æ›´æ–°æµç¨‹

```
1. æ‹‰å–ä¸Šæ¸¸æ›´æ–°
   â†“
2. æ£€æŸ¥æ˜¯å¦å½±å“è‡ªå®šä¹‰åŠŸèƒ½
   â†“
3. å¿…è¦æ—¶è°ƒæ•´è‡ªå®šä¹‰ä»£ç 
   â†“
4. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
   â†“
5. æäº¤æ›´æ”¹
```

---

## ğŸ“‹ æ–‡ä»¶å‘½åè§„èŒƒ

### Shell è„šæœ¬

- ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿
- æ‰©å±•åä¸º `.sh`
- ç¤ºä¾‹ï¼š`my_custom_tool.sh`

### é…ç½®æ–‡ä»¶

- ä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿
- æ‰©å±•åä¸º `.conf` æˆ– `.cfg`
- ç¤ºä¾‹ï¼š`database.conf`

### æ–‡æ¡£æ–‡ä»¶

- ä½¿ç”¨ä¸­æ–‡å‘½å
- æ‰©å±•åä¸º `.md`
- ç¤ºä¾‹ï¼š`ä½¿ç”¨è¯´æ˜.md`

---

## ğŸ¨ ç›®å½•ç»„ç»‡å»ºè®®

### æŒ‰åŠŸèƒ½åˆ†ç±»ï¼ˆæ¨èï¼‰

```
custom/tools/
â”œâ”€â”€ system/              # ç³»ç»Ÿç®¡ç†å·¥å…·
â”‚   â”œâ”€â”€ info.sh
â”‚   â”œâ”€â”€ monitor.sh
â”‚   â””â”€â”€ cleanup.sh
â”œâ”€â”€ network/             # ç½‘ç»œå·¥å…·
â”‚   â”œâ”€â”€ speed_test.sh
â”‚   â””â”€â”€ port_scan.sh
â”œâ”€â”€ docker/              # Docker å·¥å…·
â”‚   â”œâ”€â”€ container_mgr.sh
â”‚   â””â”€â”€ image_mgr.sh
â””â”€â”€ database/            # æ•°æ®åº“å·¥å…·
    â”œâ”€â”€ backup.sh
    â””â”€â”€ restore.sh
```

### æŒ‰é¡¹ç›®åˆ†ç±»

```
custom/tools/
â”œâ”€â”€ project_a/           # é¡¹ç›® A ç›¸å…³å·¥å…·
â”‚   â”œâ”€â”€ deploy.sh
â”‚   â””â”€â”€ monitor.sh
â”œâ”€â”€ project_b/           # é¡¹ç›® B ç›¸å…³å·¥å…·
â”‚   â”œâ”€â”€ backup.sh
â”‚   â””â”€â”€ sync.sh
â””â”€â”€ common/              # é€šç”¨å·¥å…·
    â”œâ”€â”€ utils.sh
    â””â”€â”€ helpers.sh
```

---

## ğŸ”’ å®‰å…¨å»ºè®®

### æ•æ„Ÿä¿¡æ¯ç®¡ç†

1. **ä¸è¦åœ¨è„šæœ¬ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯**
   - ä½¿ç”¨é…ç½®æ–‡ä»¶
   - ä½¿ç”¨ç¯å¢ƒå˜é‡
   - ä½¿ç”¨å¯†é’¥ç®¡ç†å·¥å…·

2. **é…ç½®æ–‡ä»¶æƒé™**
   ```bash
   chmod 600 custom/config/secrets.conf
   ```

3. **Git å¿½ç•¥æ•æ„Ÿæ–‡ä»¶**
   ```gitignore
   custom/config/*.key
   custom/config/*.secret
   custom/config/*.env
   ```

### è„šæœ¬å®‰å…¨

1. **è¾“å…¥éªŒè¯**
   ```bash
   if [[ ! "$input" =~ ^[a-zA-Z0-9]+$ ]]; then
       echo "æ— æ•ˆè¾“å…¥"
       exit 1
   fi
   ```

2. **ä½¿ç”¨å¼•å·**
   ```bash
   # å¥½çš„åšæ³•
   rm -rf "${backup_dir}"
   
   # ä¸å¥½çš„åšæ³•ï¼ˆå¯èƒ½å¯¼è‡´æ„å¤–åˆ é™¤ï¼‰
   rm -rf $backup_dir
   ```

3. **é”™è¯¯å¤„ç†**
   ```bash
   set -e  # é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º
   set -u  # ä½¿ç”¨æœªå®šä¹‰å˜é‡æ—¶æŠ¥é”™
   ```

---

## ğŸ“Š ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥

### Git åˆ†æ”¯ç®¡ç†

```
main            # ä¸»åˆ†æ”¯ï¼Œè·Ÿè¸ªä¸Šæ¸¸
â”œâ”€â”€ upstream    # ä¸Šæ¸¸åŒæ­¥åˆ†æ”¯
â””â”€â”€ custom      # è‡ªå®šä¹‰å¼€å‘åˆ†æ”¯
    â”œâ”€â”€ feature/tool-a    # åŠŸèƒ½åˆ†æ”¯
    â””â”€â”€ feature/tool-b    # åŠŸèƒ½åˆ†æ”¯
```

### æäº¤è§„èŒƒ

```bash
# åŠŸèƒ½æ·»åŠ 
git commit -m "feat: æ·»åŠ ç³»ç»Ÿç›‘æ§å·¥å…·"

# åŠŸèƒ½ä¿®å¤
git commit -m "fix: ä¿®å¤é…ç½®æ–‡ä»¶åŠ è½½é—®é¢˜"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–°ä½¿ç”¨è¯´æ˜"

# é…ç½®è°ƒæ•´
git commit -m "config: æ›´æ–°æ•°æ®åº“é…ç½®"
```

---

## ğŸ”§ å¼€å‘å·¥å…·æ¨è

### ç¼–è¾‘å™¨

- **VSCode**ï¼šæ¨èå®‰è£… ShellCheck æ‰©å±•
- **Vim/Neovim**ï¼šè½»é‡çº§ï¼Œé€‚åˆæœåŠ¡å™¨ç«¯ç¼–è¾‘
- **Sublime Text**ï¼šå¿«é€Ÿå“åº”

### è°ƒè¯•å·¥å…·

- **shellcheck**ï¼šShell è„šæœ¬é™æ€åˆ†æå·¥å…·
  ```bash
  shellcheck custom/tools/my_tool.sh
  ```

- **bash -x**ï¼šè°ƒè¯•æ¨¡å¼
  ```bash
  bash -x custom/tools/my_tool.sh
  ```

### æµ‹è¯•å·¥å…·

- **bats**ï¼šBash è‡ªåŠ¨åŒ–æµ‹è¯•ç³»ç»Ÿ
- **shunit2**ï¼šShell å•å…ƒæµ‹è¯•æ¡†æ¶

---

## ğŸ“ˆ æ‰©å±•æ–¹å‘

### 1. æ·»åŠ æ—¥å¿—ç³»ç»Ÿ

```bash
# custom/tools/logger.sh
log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" >> "${LOG_DIR}/toolbox.log"
}
```

### 2. æ·»åŠ é”™è¯¯å¤„ç†

```bash
# custom/tools/error_handler.sh
handle_error() {
    echo "é”™è¯¯ï¼š$1"
    log "ERROR: $1"
    exit 1
}
```

### 3. æ·»åŠ é€šçŸ¥ç³»ç»Ÿ

```bash
# custom/tools/notify.sh
send_notification() {
    # å‘é€é‚®ä»¶ã€Telegram æ¶ˆæ¯ç­‰
    echo "$1" | mail -s "å·¥å…·ç®±é€šçŸ¥" user@example.com
}
```

### 4. æ·»åŠ å®šæ—¶ä»»åŠ¡

```bash
# ä½¿ç”¨ cron å®šæ—¶æ‰§è¡Œå·¥å…·
0 2 * * * bash /path/to/custom/tools/backup.sh
```

---

## ğŸ“ è·å–å¸®åŠ©

- **ä¸Šæ¸¸é¡¹ç›®**ï¼šhttps://github.com/kejilion/sh
- **æ–‡æ¡£ä½ç½®**ï¼š`docs/` ç›®å½•
- **ç¤ºä¾‹ä»£ç **ï¼š`custom/tools/` ç›®å½•

---

**æœ€åæ›´æ–°**: 2025-01-25
